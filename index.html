<!DOCTYPE html>
<html>
    <head>
        <script type="module">
            import data from "./months.json" assert { type: "json" };

            function generateDate() {
                const d = new Date();

                function isLeapYear() {
                    const year = d.getFullYear();
                    if (year % 400 === 0) return true;
                    if (year % 100 === 0) return false;
                    return year % 4 === 0;
                }

                let dayOfYear = 0;
                /*
                the plan:
                - find day of the year
                - generate random month
                - find day relative to month
                - generate random year
                - find day relative to year
                */
                let curMonth = d.getMonth();
                dayOfYear = d.getDate();
                while (curMonth > 0) {
                    curMonth--;
                    dayOfYear += data[curMonth][1];
                    if (isLeapYear() && curMonth === 2) dayOfYear++;
                }

                const randomMonth = Math.floor(Math.random() * 12);
                
                
                document.getElementById("date").textContent = `Today is ${dayOfYear}`;
            }
            addEventListener("load", generateDate);
        </script>
    </head>
    <body>
        <h1 id="date" style="height: 100%; font-family: 'Courier New', Courier, monospace; font-size: 100px; text-align: center;">Sorry, an error has occurred.</h1>
    </body>
</html>